webpackJsonp([23],{"3OAt":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"home",data:function(){return{form:{compty:"",word:""},options:[{lable:"1",value:"组织1"},{lable:"2",value:"组织2"}],tableData:[],id:"",pid:"",pageIndex:1,total:0,pageSize:10}},created:function(){this.id=this.$route.query.id,this.getQuestionList()},mounted:function(){this.getQuestionList()},methods:{getClass:function(){return"background: #66CE90FF"},getQuestionList:function(){var t=this;localStorage.getItem("token");this.$api.get("/problemlist",{project_id:this.id,page:this.pageIndex,pagesize:this.pagesize,keyword:this.form.word},function(e){t.tableData=e.data.data,t.total=e.data.total_count},function(e){t.$message.error(e.message)})},onSubmit:function(){this.getQuestionList()},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.pageIndex=t,this.getQuestionList(),console.log("当前页: "+t)},addCompanyList:function(){this.$router.push({path:"/new-problems",query:{id:this.id}})},editRow:function(t){var e=t.id;this.$router.push({path:"/modify-problem",query:{id:e}})},lookRow:function(t){var e=t.id;this.$router.push({path:"/modify-problem",query:{id:e,type:2}})},deleteRow:function(t){var e=this,a=t.id;localStorage.getItem("token");this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e;t.$api.delete("/problem/"+a,{},function(t){e.$message({message:t.message,type:"success"}),e.getQuestionList()},function(e){t.$message.error(e.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},change:function(){var t=this,e={token:localStorage.getItem("token")};this.$api.get("/problem/2",e,function(e){console.log(e),t.tableData=e.data.data})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main company-main"},[a("div",{staticClass:"mainHead"},[a("div",{staticClass:"searchBox"},[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-caret-right"}),t._v("当前位置：")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v(" 河南省电力公司")]),t._v(" "),a("el-breadcrumb-item",{staticClass:"beforeloca"},[t._v("问题列表")])],1)],1),t._v(" "),a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("div",{staticClass:"search-input"},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.word,callback:function(e){t.$set(t.form,"word",e)},expression:"form.word"}})],1),t._v(" "),a("el-button",{staticClass:"btn-query",on:{click:t.onSubmit}},[t._v("搜索")]),t._v(" "),2==t.$utils.getloc("group_id")?a("div",{staticClass:"btn-add",on:{click:t.addCompanyList}},[t._v("新增")]):t._e()],1)])],1)]),t._v(" "),a("div",{staticClass:"dataList"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":t.getClass,height:"49.3rem"}},[a("el-table-column",{attrs:{prop:"title",label:"问题名称",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"classify",label:"问题标签",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"addtime",label:"时间",width:""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operation"},[5==t.$utils.getloc("group_id")?a("span",{staticClass:"oper_edit",on:{click:function(a){return t.lookRow(e.row)}}},[t._v("查看")]):t._e(),t._v(" "),2==t.$utils.getloc("group_id")?a("span",{staticClass:"oper_edit",on:{click:function(a){return t.editRow(e.row)}}},[t._v("修改")]):t._e(),t._v(" "),2==t.$utils.getloc("group_id")?a("span",{staticClass:"oper_delet",on:{click:function(a){return t.deleteRow(e.row)}}},[t._v("删除")]):t._e()])]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(t){a("jBOO")},"data-v-ed2f1e8e",null);e.default=s.exports},jBOO:function(t,e){}});
//# sourceMappingURL=23.87e557d91045c4b0bc2d.js.map