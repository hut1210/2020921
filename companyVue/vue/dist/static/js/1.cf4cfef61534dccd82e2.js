webpackJsonp([1],{"/0tz":function(t,e,s){t.exports=s.p+"static/img/login.c533d35.png"},W2Q3:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"login",data:function(){return{ok:!1,redirect:"",ctoken:"",picCodeSrc:"",formLogin:{email:"",pwd:"",source:"PC",nick:"",cfpassword:""},errorInfo:{text:"登陆失败,请重试",isShowError:!1}}},created:function(){},mounted:function(){},methods:{login:function(){var t=this,e=this,s="/gpauth/partner/merchant/users/login";if(""===e.formLogin.email)return e.$message.error("请输入账号"),!1;if(""===e.formLogin.pwd)return e.$message.error("请输入密码"),!1;if(e.ok){if(e.formLogin.pwd!=e.formLogin.cfpassword)return e.$message.error("两次密码输入不一致！"),!1;s="/gpauth/partner/merchant/users/add"}console.log(e.formLogin),e.$api.post(s,e.formLogin,function(s){e.$utils.setloc("token",s.result.access_token),e.redirect&&-1===e.redirect.indexOf("/login")?e.$router.push({path:e.redirect}):1e3==s.code?e.ok?(t.ok=!1,t.$message({message:"注册成功",type:"success"})):(t.getJobmess(),t.$message({message:"登陆成功",type:"success"})):e.$message.error(s.info)})},getJobmess:function(){var t=this;t.$api.get("gpmanage/partner/merchant/info",{},function(e){1e3==e.code?(t.$utils.setloc("userNickname",e.result.merchanDetail.companyName),1==e.result.merchanDetail.status?(t.$utils.setloc("group_id",1),t.$utils.setloc("countryCode",e.result.merchantAccount.countryCode),t.$utils.setloc("currency",e.result.merchantAccount.currency)):0==e.result.merchanDetail.status||2==e.result.merchanDetail.status?t.$utils.setloc("group_id",2):t.$utils.setloc("group_id",0)):t.$utils.setloc("group_id",0),t.$router.push({path:"/basic-setup"})})},toForgotView:function(){this.$router.push({path:"/forgot-password"})},toaddView:function(){this.ok=!0}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login_box"},[t._m(0),t._v(" "),s("div",{staticClass:"login_content"},[s("div",{staticClass:"main_box"},[t._m(1),t._v(" "),s("div",{staticClass:"login_header"},[t._v("\n        商户系统\n      ")]),t._v(" "),s("el-form",{ref:"form",attrs:{model:t.formLogin}},[s("el-form-item",[s("div",{staticClass:"user-accounts phone"},[s("i",{staticClass:"el-icon-user-solid"}),t._v(" "),s("el-input",{attrs:{type:"text",placeholder:"请输入邮箱账号"},model:{value:t.formLogin.email,callback:function(e){t.$set(t.formLogin,"email",e)},expression:"formLogin.email"}})],1)]),t._v(" "),t.ok?s("el-form-item",[s("div",{staticClass:"user-accounts phone"},[s("i",{staticClass:"el-icon-user-solid"}),t._v(" "),s("el-input",{attrs:{type:"text",placeholder:"请输入昵称"},model:{value:t.formLogin.nick,callback:function(e){t.$set(t.formLogin,"nick",e)},expression:"formLogin.nick"}})],1)]):t._e(),t._v(" "),s("el-form-item",[s("div",{staticClass:"user-accounts phone"},[s("i",{staticClass:"el-icon-lock"}),t._v(" "),s("el-input",{attrs:{type:"password",placeholder:"请输入密码","auto-complete":"new-password"},model:{value:t.formLogin.pwd,callback:function(e){t.$set(t.formLogin,"pwd",e)},expression:"formLogin.pwd"}})],1)]),t._v(" "),t.ok?s("el-form-item",[s("div",{staticClass:"user-accounts phone"},[s("i",{staticClass:"el-icon-circle-check"}),t._v(" "),s("el-input",{attrs:{type:"password",placeholder:"请再次输入密码","auto-complete":"new-password"},model:{value:t.formLogin.cfpassword,callback:function(e){t.$set(t.formLogin,"cfpassword",e)},expression:"formLogin.cfpassword"}})],1)]):t._e(),t._v(" "),0==t.ok?s("el-form-item",{attrs:{label:""}},[s("p",{staticClass:"forget_pass",staticStyle:{cursor:"pointer"},on:{click:t.toForgotView}},[t._v("\n            忘记密码？\n          ")]),t._v(" "),s("p",{staticClass:"forget_pass",staticStyle:{cursor:"pointer"},on:{click:t.toaddView}},[t._v("\n            立即注册\n          ")])]):t._e(),t._v(" "),s("el-form-item",{attrs:{label:""}},[t.ok?s("el-button",{staticClass:"login",staticStyle:{margin:"0.125rem auto"},attrs:{round:""},on:{click:t.login}},[t._v("注册")]):s("el-button",{staticClass:"login",attrs:{round:""},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("p",{staticClass:"title"},[this._v("商户系统")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login_headerimg"},[e("img",{staticClass:"headerimg",attrs:{id:"logoid",src:s("/0tz"),alt:""}})])}]};var r=s("VU/8")(o,i,!1,function(t){s("df1R"),s("n1vs")},"data-v-5b9d6774",null);e.default=r.exports},df1R:function(t,e){},n1vs:function(t,e){}});
//# sourceMappingURL=1.cf4cfef61534dccd82e2.js.map