{"version":3,"sources":["webpack:///src/views/test-management/test-items-add/test-items-add.vue","webpack:///./src/views/test-management/test-items-add/test-items-add.vue?56e2","webpack:///./src/views/test-management/test-items-add/test-items-add.vue"],"names":["test_items_add","data","checkedList","form","testid","pro_name","product_name","version","project_realname","project_mobile","company_id","options","formData","tableData","date","name","executor","sort_order","created","this","getTestrand","getcompanytype","methods","goback","$router","go","self","$api","get","type","r","obj","item","id","push","e","$message","error","msg","post","onSubmit","test","start_time","end_time","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","value","err","return","message","setTimeout","addPath","tmpData","i","length","newdata","newarr","changeSort","val","index","sort","compare","property","console","log","a","b","mounted","test_items_add_test_items_add","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","label-position","label-width","label","prop","callback","$$v","$set","expression","staticStyle","width","placeholder","_l","key","c_id","company_name","_s","maxlength","scopedSlots","_u","fn","scope","disabled","row","range-separator","start-placeholder","end-placeholder","on","blur","$event","$index","margin-top","click","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/16.fca2a118710f8389e554.js","sourcesContent":["\r\n<template>\r\n  <div class=\"test-items-add-out-box\">\r\n        <div class=\"information\">\r\n            <div class=\"button\">项目信息</div>\r\n            <div class=\"information-center\">\r\n                <center>\r\n                    <el-form ref=\"form\" :model=\"form\" label-position=\"right\" label-width=\"120px\">\r\n                        <el-form-item label=\"项目名称:\" prop=\"\">\r\n                            <el-input v-model=\"form.pro_name\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"产品名称:\">\r\n                            <el-input v-model=\"form.product_name\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"产品版本号:\">\r\n                            <el-input v-model=\"form.version\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"所属公司:\">\r\n                            <el-select v-model=\"form.company_id\"  placeholder=\"请选择\" style=\"width:100%\">\r\n                              <el-option v-for=\"item in options\" :key=\"item.c_id\"  :label=\"item.company_name\" :value=\"item.c_id\" >\r\n                              </el-option>\r\n                            </el-select>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"测试范围:\">\r\n                            <el-checkbox-group v-model=\"form.testid\">\r\n                              <el-checkbox v-for=\"item in checkedList\" :key=\"item.id\" :label=\"item.id\">{{item.name}}</el-checkbox>\r\n                            </el-checkbox-group>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"项目经理:\">\r\n                            <el-input v-model=\"form.project_realname\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"联系方式:\">\r\n                            <el-input v-model=\"form.project_mobile\" maxlength=\"11\"></el-input>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </center>\r\n            </div>\r\n        </div>\r\n        <div class=\"technological\">\r\n            <div class=\"button\">检测流程排程</div>\r\n            <div class=\"technological-table\">\r\n                <el-table :data=\"tableData\" style=\"width: 100%\">\r\n                    <el-table-column  prop=\"\" label=\"\" width=\"130\">\r\n                      <template slot-scope=\"scope\">\r\n                          <el-input v-model=\"scope.row.name\" disabled placeholder=\"请输入流程名称\"></el-input>\r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"date\" label=\"\" width=\"360\">\r\n                       <template slot-scope=\"scope\">\r\n                        <el-date-picker v-model=\"scope.row.date\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\">\r\n                        </el-date-picker>\r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"\" label=\"\" width=\"120\">\r\n                      <template slot-scope=\"scope\">\r\n                        <el-select v-model=\"scope.row.executor\" placeholder=\"执行人\" disabled>\r\n                            <el-option label=\"检测方\"  value=\"1\"></el-option>\r\n                            <el-option label=\"送检方\" value=\"2\"></el-option>\r\n                        </el-select>\r\n                    \r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"\" label=\"\" width=\"80\">\r\n                      <template slot-scope=\"scope\">\r\n                          <el-input  v-model=\"scope.row.sort_order\" placeholder=\"排序\" disabled @blur=\"changeSort(scope.row.sort_order,scope.$index)\"></el-input>\r\n                      </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n                <el-button style=\"margin-top: 20px;\" @click=\"addPath\">增加流程</el-button>\r\n                <div class=\"btn-box\">\r\n                    <el-button type=\"success\" size=\"medium\" @click=\"onSubmit\">保存</el-button>\r\n                    <el-button type=\"primary\" size=\"medium\" @click=\"goback\">返回</el-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      checkedList: [],\r\n      form: {\r\n        testid: [],\r\n        pro_name: '',\r\n        product_name: '',\r\n        version: '',\r\n        project_realname: '',\r\n        project_mobile: '',\r\n        company_id: ''\r\n      },\r\n      options: [],\r\n      formData: {},\r\n      tableData: [\r\n         {\r\n          date: [],\r\n          name: \"提交测试\",\r\n          executor: '1',\r\n          sort_order: \"1\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"资料审核\",\r\n          executor: '1',\r\n          sort_order: \"2\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"资料整改\",\r\n          executor: '2',\r\n          sort_order: \"3\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"任务下达\",\r\n          executor: '1',\r\n          sort_order: \"4\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"一轮环境搭建\",\r\n          executor: '1',\r\n          sort_order: \"5\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"一轮测试\",\r\n          executor: '1',\r\n          sort_order: \"6\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"一轮整改\",\r\n          executor: '2',\r\n          sort_order: \"7\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"二轮环境搭建\",\r\n          executor: '1',\r\n          sort_order: \"8\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"二轮测试\",\r\n          executor: '1',\r\n          sort_order: \"9\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"测试完成\",\r\n          executor: '1',\r\n          sort_order: \"10\"\r\n        },\r\n        {\r\n          date: [],\r\n          name: \"测试报告\",\r\n          executor: '1',\r\n          sort_order: \"11\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  created(){\r\n    this.getTestrand()\r\n    this.getcompanytype()\r\n  },\r\n  methods: {\r\n    goback() {\r\n      this.$router.go(-1);\r\n    },\r\n    // 获取测试范围\r\n    getTestrand(){\r\n      let self = this\r\n      self.$api.get(\r\n        '/testrand',\r\n        {type: ''},\r\n        r => {\r\n            let obj = {}\r\n            for (let item in r.data){\r\n              obj = {}\r\n              obj.id = item\r\n              obj.name = r.data[item]\r\n              self.checkedList.push(obj)\r\n            }\r\n        },\r\n        e => {\r\n            self.$message.error(e.msg)\r\n        })\r\n    },\r\n    // 获取公司列表\r\n    getcompanytype(){\r\n      let self = this\r\n      self.$api.post(\r\n        'companytype',\r\n        {type: 1},\r\n        r =>{\r\n          for(let item in r.data){\r\n            self.options.push(r.data[item])\r\n          }\r\n        }\r\n      )\r\n    },\r\n    onSubmit() {\r\n      let self = this\r\n      var myreg=/^[1][3,4,5,7,8][0-9]{9}$/\r\n      if (self.form.pro_name == '') {\r\n          self.$message.error('请输入项目名称')\r\n          return false\r\n      }\r\n      if (self.form.product_name == '') {\r\n          self.$message.error('请输入产品名称')\r\n          return false\r\n      }\r\n      if (self.form.version == '') {\r\n          self.$message.error('请输入版本号')\r\n          return false\r\n      }\r\n      if (self.form.company_id == '') {\r\n          self.$message.error('请选择公司')\r\n          return false\r\n      }\r\n      if (self.form.testid== '') {\r\n          self.$message.error('请选择检测范围')\r\n          return false\r\n      }\r\n      if (self.form.project_realname == '') {\r\n          self.$message.error('请输入项目经理')\r\n          return false\r\n      }\r\n      if (self.form.project_mobile == '') {\r\n          self.$message.error('请输入联系方式')\r\n          return false\r\n      } else if (!myreg.test(self.form.project_mobile)) {\r\n         self.$message.error('请输入正确的联系方式')\r\n          return false\r\n      }\r\n      self.form.name = []\r\n      self.form.start_time = []\r\n      self.form.end_time = []\r\n      self.form.executor = []\r\n      self.form.sort_order = []\r\n      for(let item of self.tableData) {\r\n        if (item.name == ''){\r\n          self.$message.error('流程名称不能为空')\r\n          return false\r\n        }\r\n        if (item.date == ''){\r\n          self.$message.error('请选择时间')\r\n          return false\r\n        }\r\n        if (item.executor == ''){\r\n          self.$message.error('请选择执行人')\r\n          return false\r\n        }\r\n        if (item.sort_order == ''){\r\n          self.$message.error('排序不能为空')\r\n          return false\r\n        }\r\n        self.form.name.push(item.name)\r\n        self.form.start_time.push(item.date[0])\r\n        self.form.end_time.push(item.date[0])\r\n        self.form.executor.push(item.executor)\r\n        self.form.sort_order.push(item.sort_order)\r\n      }\r\n      self.$api.post(\r\n        '/project',\r\n        self.form,\r\n        r => {\r\n          self.$message({\r\n            message:'新增成功',\r\n            type:'success'\r\n          });\r\n          setTimeout(() => {\r\n            self.goback()\r\n          }, 1000);\r\n        }\r\n      )\r\n    },\r\n    // 添加流程\r\n    addPath() {\r\n      self = this\r\n      let tmpData= [];\r\n      for(let i=0; i<this.tableData.length-2;i++)\r\n      {\r\n        tmpData[i] = this.tableData[i]\r\n      }\r\n\r\n      if((this.tableData.length - 11)/3 + 2 ){\r\n        let newdata = (this.tableData.length - 11)/3 + 2;\r\n        let newarr = ['零','一','二','三','四','五'];\r\n        if(newdata > 4){\r\n          self.$message.error('超乎我的预期了')\r\n          return false\r\n        }\r\n        else\r\n        {\r\n          tmpData.push({\r\n            date: [],\r\n            name: newarr[newdata]+\"轮整改\",\r\n            executor: \"2\",\r\n            sort_order: tmpData.length + 1\r\n          });\r\n          tmpData.push({\r\n            date: [],\r\n            name: (newarr[newdata+1])+\"轮环境搭建\",\r\n            executor: \"2\",\r\n            sort_order: tmpData.length + 1\r\n          });\r\n          tmpData.push({\r\n            date: [],\r\n            name: (newarr[newdata+1])+\"轮测试\",\r\n            executor: \"1\",\r\n            sort_order: tmpData.length + 1\r\n          });\r\n          tmpData.push({\r\n            date: [],\r\n            name: \"测试完成\",\r\n            executor: \"1\",\r\n            sort_order: tmpData.length + 1\r\n          });\r\n          tmpData.push({\r\n            date: [],\r\n            name: \"测试报告\",\r\n            executor: \"1\",\r\n            sort_order: tmpData.length + 1\r\n          });\r\n          this.tableData = tmpData\r\n        }\r\n      }\r\n    },\r\n    changeSort(val,index){\r\n      let self = this\r\n      self.tableData.sort(this.compare('sort_order'))\r\n    },\r\n    // 排序\r\n    compare(property){\r\n      console.log(property,\"...property\")\r\n      return function(a,b){\r\n        var value1 = a[property];\r\n        var value2 = b[property];\r\n        return value1 - value2;\r\n      }\r\n    }\r\n  },\r\n  mounted: function() {}\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.test-items-add-out-box {\r\n  .information {\r\n    width: 100%;\r\n    height: auto;\r\n    margin-bottom: 20px;\r\n    padding: 20px;\r\n    background: #fff;\r\n    overflow: hidden;\r\n    box-sizing: border-box;\r\n    .information-center {\r\n      center {\r\n        width: 40%;\r\n        margin: 0 auto;\r\n        // transform: translateX(-50%);\r\n        .el-form-item {\r\n          margin-top: 15px;\r\n        }\r\n        .form-div {\r\n          border: 1px solid rgba(237, 235, 235, 1);\r\n          border-radius: 2px;\r\n          text-align: left;\r\n          padding: 0 15px;\r\n          height: 40px;\r\n          line-height: 40px;\r\n          .form-label-span {\r\n            color: #66ce90;\r\n            padding-right: 20px;\r\n          }\r\n          .form-div-label {\r\n            width: 5px;\r\n            height: 5px;\r\n            display: inline-block;\r\n            border-radius: 50%;\r\n            border: 3px solid #66ce90;\r\n          }\r\n          .form-div-label-no {\r\n            width: 5px;\r\n            height: 5px;\r\n            display: inline-block;\r\n            border-radius: 50%;\r\n            border: 3px solid #ccc;\r\n          }\r\n        }\r\n        .div-click {\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .technological {\r\n    overflow: hidden;\r\n    padding: 20px;\r\n    background: #fff;\r\n    .technological-table {\r\n      width: 62%;\r\n      margin: 0 auto;\r\n      text-align: center;\r\n      padding: 20px;\r\n      .btn-box {\r\n        text-align: center;\r\n        margin-top: 20px;\r\n      }\r\n      /deep/.el-table__body{\r\n         transform: translateX(25%);\r\n      }\r\n    }\r\n  }\r\n  .button {\r\n    width: 100px;\r\n    height: 30px;\r\n    padding: 0 10px;\r\n    margin: 0 auto;\r\n    line-height: 30px;\r\n    font-size: 16px;\r\n    color: #fff;\r\n    text-align: center;\r\n    background: rgba(252, 183, 42, 1);\r\n    border-radius: 2px;\r\n  }\r\n}\r\n</style>\r\n<style>\r\n.technological .technological-table .el-table__row {\r\n     background-color: #f7fdf9 !important;\r\n}\r\n.technological .technological-table .el-table__header-wrapper {\r\n  height:0\r\n}\r\n/* .el-table--striped .el-table__body tr.el-table__row--striped td {\r\n     background-color: #141722;\r\n} */\r\n.el-table__body{\r\n  width:62%;\r\n}\r\n.technological\r\n  .technological-table\r\n  .el-table__row\r\n  .el-input--small\r\n  .el-input__inner {\r\n  height: 35px;\r\n  line-height: 35px;\r\n  text-align: center;\r\n}\r\n.information .information-center center .el-checkbox__inner {\r\n  border-radius:50%;\r\n}\r\n.information .information-center center .el-checkbox{\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/test-management/test-items-add/test-items-add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"test-items-add-out-box\"},[_c('div',{staticClass:\"information\"},[_c('div',{staticClass:\"button\"},[_vm._v(\"项目信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"information-center\"},[_c('center',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-position\":\"right\",\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"项目名称:\",\"prop\":\"\"}},[_c('el-input',{model:{value:(_vm.form.pro_name),callback:function ($$v) {_vm.$set(_vm.form, \"pro_name\", $$v)},expression:\"form.pro_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"产品名称:\"}},[_c('el-input',{model:{value:(_vm.form.product_name),callback:function ($$v) {_vm.$set(_vm.form, \"product_name\", $$v)},expression:\"form.product_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"产品版本号:\"}},[_c('el-input',{model:{value:(_vm.form.version),callback:function ($$v) {_vm.$set(_vm.form, \"version\", $$v)},expression:\"form.version\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所属公司:\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.company_id),callback:function ($$v) {_vm.$set(_vm.form, \"company_id\", $$v)},expression:\"form.company_id\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.c_id,attrs:{\"label\":item.company_name,\"value\":item.c_id}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"测试范围:\"}},[_c('el-checkbox-group',{model:{value:(_vm.form.testid),callback:function ($$v) {_vm.$set(_vm.form, \"testid\", $$v)},expression:\"form.testid\"}},_vm._l((_vm.checkedList),function(item){return _c('el-checkbox',{key:item.id,attrs:{\"label\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"项目经理:\"}},[_c('el-input',{model:{value:(_vm.form.project_realname),callback:function ($$v) {_vm.$set(_vm.form, \"project_realname\", $$v)},expression:\"form.project_realname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系方式:\"}},[_c('el-input',{attrs:{\"maxlength\":\"11\"},model:{value:(_vm.form.project_mobile),callback:function ($$v) {_vm.$set(_vm.form, \"project_mobile\", $$v)},expression:\"form.project_mobile\"}})],1)],1)],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"technological\"},[_c('div',{staticClass:\"button\"},[_vm._v(\"检测流程排程\")]),_vm._v(\" \"),_c('div',{staticClass:\"technological-table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"\",\"width\":\"130\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"disabled\":\"\",\"placeholder\":\"请输入流程名称\"},model:{value:(scope.row.name),callback:function ($$v) {_vm.$set(scope.row, \"name\", $$v)},expression:\"scope.row.name\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"\",\"width\":\"360\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(scope.row.date),callback:function ($$v) {_vm.$set(scope.row, \"date\", $$v)},expression:\"scope.row.date\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"placeholder\":\"执行人\",\"disabled\":\"\"},model:{value:(scope.row.executor),callback:function ($$v) {_vm.$set(scope.row, \"executor\", $$v)},expression:\"scope.row.executor\"}},[_c('el-option',{attrs:{\"label\":\"检测方\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"送检方\",\"value\":\"2\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"placeholder\":\"排序\",\"disabled\":\"\"},on:{\"blur\":function($event){return _vm.changeSort(scope.row.sort_order,scope.$index)}},model:{value:(scope.row.sort_order),callback:function ($$v) {_vm.$set(scope.row, \"sort_order\", $$v)},expression:\"scope.row.sort_order\"}})]}}])})],1),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-top\":\"20px\"},on:{\"click\":_vm.addPath}},[_vm._v(\"增加流程\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn-box\"},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"medium\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.goback}},[_vm._v(\"返回\")])],1)],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4b9f5770\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/test-management/test-items-add/test-items-add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b9f5770\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./test-items-add.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b9f5770\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./test-items-add.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./test-items-add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./test-items-add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b9f5770\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./test-items-add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4b9f5770\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/test-management/test-items-add/test-items-add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}