webpackJsonp([20],{"7HS+":function(e,a){},GmWG:function(e,a){},HOAs:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={data:function(){return{optionsSelect:[],ruleForm:{organization:"",qrganizationname:""},companyId:"",rules:{qrganizationname:[{required:!0,message:"请输入组织名称",trigger:"blur"},{max:15,message:"长度在 15 个字符以内",trigger:"blur"}],organization:[{required:!0,message:"请选择上级组织",trigger:"change"}]},newId:[],newName:[]}},created:function(){this.companyId=this.$route.params.companyId,this.organId=this.$route.params.id,this.pid=this.$route.params.pid,this.type=this.$route.params.type,this.orglist(this.companyId),0==this.type||this.editOrgan()},methods:{orglist:function(e){var a=this;a.$api.get("orglist",{company_id:a.companyId},function(e){for(var t=0;t<e.data.list.length;t++)a.optionsSelect.push({id:e.data.list[t].id,name:e.data.list[t].lefthtml+e.data.list[t].name})},function(e){a.$message.error(e.message)})},submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;0==a.type?a.addOrgan(a.ruleForm):a.editOrganForm(a.ruleForm)})},addOrgan:function(e){var a=this,t=e.organization,r=e.qrganizationname;a.$api.post("org",{company_id:a.companyId,pid:t,name:r},function(e){a.$message.success(e.message),a.$router.push({name:"organ-structure-list",query:{companyId:a.companyId}})},function(e){a.$message.error(e.message)})},editOrgan:function(){var e=this;e.$api.get("org/"+e.organId,{},function(a){e.ruleForm.organization=a.data.pid,e.ruleForm.qrganizationname=a.data.name},function(a){e.$message.error(a.message)})},editOrganForm:function(e){var a=this,t=e.qrganizationname,r=e.organization;a.$api.post("orginfo/"+a.organId,{name:t,pid:r,company_id:a.companyId},function(e){a.$message.success(e.message),a.$router.push({name:"organ-structure-list",query:{companyId:a.companyId}})},function(e){a.$message.error(e.message)})}},mounted:function(){}},n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"organ-structure-updata sharing"},[t("div",{staticClass:"return"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("当前位置:")]),e._v(" "),t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),t("el-breadcrumb-item",[e._v("组织结构修改")])],1)],1),e._v(" "),t("div",{staticClass:"skillby-tab"},[t("div",{staticClass:"search_box"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[t("div",{staticClass:"search-input"},[t("el-form-item",{attrs:{label:"上级组织：",prop:"organization"}},[t("el-select",{attrs:{placeholder:"请选择上级组织"},model:{value:e.ruleForm.organization,callback:function(a){e.$set(e.ruleForm,"organization",a)},expression:"ruleForm.organization"}},[t("el-option",{attrs:{label:"顶级组织",value:"0"}}),e._v(" "),e._l(e.optionsSelect,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),t("el-form-item",{attrs:{label:"组织名称：",prop:"qrganizationname"}},[t("el-input",{attrs:{placeholder:"请输入组织名称"},model:{value:e.ruleForm.qrganizationname,callback:function(a){e.$set(e.ruleForm,"qrganizationname",a)},expression:"ruleForm.qrganizationname"}})],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submitForm("ruleForm")}}},[e._v("保存")])],1)])],1)])])},staticRenderFns:[]};var i=t("VU/8")(r,n,!1,function(e){t("GmWG"),t("7HS+")},null,null);a.default=i.exports}});
//# sourceMappingURL=20.98a52d8f1647ee7b1db6.js.map